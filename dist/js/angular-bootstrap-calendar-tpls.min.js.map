{"version":3,"sources":["angular-bootstrap-calendar-tpls.js","app.js","templates.js","services/moment.js","services/calendarHelper.js","filters/truncateEventTitle.js","directives/mwlCollapseFallback.js","directives/mwlCalendarYear.js","directives/mwlCalendarWeek.js","directives/mwlCalendarSlideBox.js","directives/mwlCalendarMonth.js","directives/mwlCalendarDay.js","directives/mwlCalendar.js"],"names":["window","angular","module","run","$templateCache","put","constant","moment","service","$filter","isISOWeekBasedOnLocale","startOf","day","isISOWeek","userValue","isDefined","getEventsInPeriod","calendarDate","period","allEvents","startPeriod","endPeriod","endOf","filter","event","self","eventIsInPeriod","starts_at","ends_at","this","getMonthNames","short","format","months","i","push","Date","getWeekDayNames","useISOWeek","weekdays","startDay","eventStart","eventEnd","periodStart","periodEnd","isAfter","isBefore","isSame","getYearView","events","currentDay","grid","eventsInPeriod","row","j","monthIndex","length","add","subtract","toDate","label","shift","isToday","date","getMonthView","getWeekDayIndex","startOfMonth","dateOffset","numberOfDaysInMonth","buildRow","Array","eventsWithIds","map","index","$id","weekdayIndex","prefillMonth","clone","inMonth","isPast","isFuture","isWeekend","indexOf","postfillMonth","getWeekView","beginningOfWeek","endOfWeek","columns","weekDays","currentWeekDayIndex","getDay","weekDay","eventsSorted","offset","span","weekViewStart","weekViewEnd","diff","daySpan","dayOffset","getDayView","dayStartHour","dayEndHour","dayHeight","calendarStart","calendarEnd","calendarHeight","dayHeightMultiplier","buckets","top","height","diffStart","left","cannotFitInABucket","forEach","bucket","bucketIndex","canFitInThisBucket","bucketItem","toggleEventBreakdown","view","rowIndex","cellIndex","closeAllOpenItems","isOpened","cell","openEvents","isCellOpened","string","boxHeight","substr","directive","$injector","has","restrict","controller","$scope","$attrs","$element","unbindWatcher","$watch","mwlCollapseFallback","shouldCollapse","addClass","removeClass","unbindDestroy","$on","templateUrl","require","scope","eventClick","eventEditClick","eventDeleteClick","editEventHtml","deleteEventHtml","autoOpen","timespanClick","$sce","$timeout","calendarHelper","updateView","firstRun","year","monthClicked","yearIndex","monthClickedFirstRun","handler","drillDown","month","calendarCtrl","changeView","link","element","attrs","useIsoWeek","replace","isOpen","elm","ctrls","isMonthView","isYearView","week","dayClicked","dayClickedFirstRun","highlightEvent","shouldAddClass","highlightClass","dayContainsEvent","e","type","eventLabel","timeLabel","dayViewStart","dayViewEnd","dayViewSplit","hours","parseInt","days","dayCounter","control","weekTitleLabel","$locale","titleFunctions","newDay","prev","next","getTitle","firstRunWatcher","locale","id","originalView","copy","unbindDestroyListener"],"mappings":"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","file":"angular-bootstrap-calendar-tpls.min.js","sourcesContent":["(function (window, angular) {\n    'use strict';\n    angular.module('mwl.calendar', []);\n    angular.module('mwl.calendar').run([\n        '$templateCache',\n        function ($templateCache) {\n            $templateCache.put('templates/calendarSlideBox.html', '<div class=\"cal-slide-box\" collapse=\"shouldCollapse\" mwl-collapse-fallback=\"shouldCollapse\"><div class=\"cal-slide-content cal-event-list\"><ul class=\"unstyled list-unstyled\"><li ng-repeat=\"event in openEvents track by $index\"><span class=\"pull-left event\" ng-class=\"\\'event-\\' + event.type\"></span> &nbsp; <a href=\"javascript:;\" class=\"event-item\" ng-click=\"eventClick({calendarEvent: event})\">{{ event.title }} <span ng-show=\"isMonthView\">({{ event.starts_at | date:\\'shortTime\\' }})</span> <span ng-show=\"isYearView\">({{ event.starts_at | date:\\'MMM d, h:mm a\\' }})</span></a> <a href=\"javascript:;\" class=\"event-item-edit\" ng-if=\"editEventHtml && event.editable !== false\" ng-bind-html=\"$sce.trustAsHtml(editEventHtml)\" ng-click=\"eventEditClick({calendarEvent: event})\"></a> <a href=\"javascript:;\" class=\"event-item-delete\" ng-if=\"deleteEventHtml && event.deletable !== false\" ng-bind-html=\"$sce.trustAsHtml(deleteEventHtml)\" ng-click=\"eventDeleteClick({calendarEvent: event})\"></a></li></ul></div></div>');\n            $templateCache.put('templates/day.html', '<div class=\"cal-day-box\"><div class=\"row-fluid clearfix cal-row-head\"><div class=\"span1 col-xs-1 cal-cell\">{{ timeLabel || \\'Time\\' }}</div><div class=\"span11 col-xs-11 cal-cell\">{{ eventLabel || \\'Events\\' }}</div></div><div class=\"cal-day-panel\" class=\"clearfix\" ng-style=\"{height: (days.length * dayHeight) + \\'px\\'}\"><div class=\"cal-day-panel-hour\"><div class=\"cal-day-hour\" ng-repeat=\"day in days track by $index\"><div class=\"row-fluid cal-day-hour-part\"><div class=\"span1 col-xs-1\"><strong>{{ day.label }}</strong></div><div class=\"span11 col-xs-11\"></div></div><div class=\"row-fluid cal-day-hour-part\"><div class=\"span1 col-xs-1\"></div><div class=\"span11 col-xs-11\"></div></div><div class=\"row-fluid cal-day-hour-part\" ng-show=\"dayViewSplit < 30\"><div class=\"span1 col-xs-1\"></div><div class=\"span11 col-xs-11\"></div></div><div class=\"row-fluid cal-day-hour-part\" ng-show=\"dayViewSplit < 30\"><div class=\"span1 col-xs-1\"></div><div class=\"span11 col-xs-11\"></div></div><div class=\"row-fluid cal-day-hour-part\" ng-show=\"dayViewSplit < 15\"><div class=\"span1 col-xs-1\"></div><div class=\"span11 col-xs-11\"></div></div><div class=\"row-fluid cal-day-hour-part\" ng-show=\"dayViewSplit < 15\"><div class=\"span1 col-xs-1\"></div><div class=\"span11 col-xs-11\"></div></div></div></div><div class=\"pull-left day-event day-highlight dh-event-{{ event.type }}\" ng-repeat=\"event in view track by $index\" ng-style=\"{top: event.top + \\'px\\', left: event.left + 60 + \\'px\\', height: event.height + \\'px\\'}\"><a href=\"javascript:;\" class=\"event-item\" ng-click=\"eventClick({calendarEvent: event})\"><span>{{ event.title | truncateEventTitle:20:event.height }}</span></a></div></div></div>');\n            $templateCache.put('templates/main.html', '<div class=\"cal-context\" ng-switch=\"view\"><div class=\"alert alert-danger\" ng-switch-default>The value passed to calendar-view is not set</div><mwl-calendar-year calendar-events=\"events\" calendar-current-day=\"currentDay\" calendar-event-click=\"eventClick\" calendar-edit-event-click=\"eventEditClick\" calendar-delete-event-click=\"eventDeleteClick\" calendar-edit-event-html=\"editEventHtml\" calendar-delete-event-html=\"deleteEventHtml\" calendar-auto-open=\"autoOpen\" calendar-timespan-click=\"timespanClick\" ng-switch-when=\"year\"></mwl-calendar-year><mwl-calendar-month calendar-events=\"events\" calendar-current-day=\"currentDay\" calendar-event-click=\"eventClick\" calendar-edit-event-click=\"eventEditClick\" calendar-delete-event-click=\"eventDeleteClick\" calendar-edit-event-html=\"editEventHtml\" calendar-delete-event-html=\"deleteEventHtml\" calendar-auto-open=\"autoOpen\" calendar-use-iso-week=\"useIsoWeek\" calendar-timespan-click=\"timespanClick\" ng-switch-when=\"month\"></mwl-calendar-month><mwl-calendar-week calendar-events=\"events\" calendar-current-day=\"currentDay\" calendar-event-click=\"eventClick\" calendar-use-iso-week=\"useIsoWeek\" calendar-timespan-click=\"timespanClick\" ng-switch-when=\"week\"></mwl-calendar-week><mwl-calendar-day calendar-events=\"events\" calendar-current-day=\"currentDay\" calendar-event-click=\"eventClick\" calendar-event-label=\"{{ eventLabel }}\" calendar-time-label=\"{{ timeLabel }}\" calendar-day-view-start=\"{{ dayViewStart }}\" calendar-day-view-end=\"{{ dayViewEnd }}\" calendar-day-view-split=\"{{ dayViewSplit || 30 }}\" ng-switch-when=\"day\"></mwl-calendar-day></div>');\n            $templateCache.put('templates/month.html', '<div class=\"cal-row-fluid cal-row-head\"><div class=\"cal-cell1\" ng-repeat=\"day in weekDays track by $index\">{{ day }}</div></div><div class=\"cal-month-box\"><div ng-repeat=\"week in view track by $index\"><div class=\"cal-row-fluid cal-before-eventlist\"><div class=\"cal-cell1 cal-cell {{ day.highlightClass }}\" ng-repeat=\"day in week track by $index\" ng-click=\"dayClicked($parent.$index, $index)\" ng-class=\"{pointer: day.events.length > 0}\"><div class=\"cal-month-day\" ng-class=\"{\\n            \\'cal-day-outmonth\\': !day.inMonth,\\n            \\'cal-day-inmonth\\': day.inMonth,\\n            \\'cal-day-weekend\\': day.isWeekend,\\n            \\'cal-day-past\\': day.isPast,\\n            \\'cal-day-today\\': day.isToday,\\n            \\'cal-day-future\\': day.isFuture\\n          }\"><small class=\"cal-events-num badge badge-important pull-left\" ng-show=\"day.events.length > 0\">{{ day.events.length }}</small> <span class=\"pull-right\" data-cal-date ng-click=\"drillDown(day.label)\">{{ day.label }}</span><div class=\"cal-day-tick\" ng-show=\"day.isOpened\"><i class=\"glyphicon glyphicon-chevron-up\"></i> <i class=\"fa fa-chevron-up\"></i></div><div class=\"events-list\" ng-show=\"day.events.length > 0\"><a href=\"javascript:;\" ng-click=\"eventClick({calendarEvent: event})\" ng-repeat=\"event in day.events track by $index\" class=\"pull-left event event-{{ event.type }}\" ng-mouseenter=\"highlightEvent(event, true)\" ng-mouseleave=\"highlightEvent(event, false)\" tooltip-append-to-body=\"true\" tooltip=\"{{ event.title }}\"></a></div></div></div></div><mwl-calendar-slide-box is-open=\"!week.isOpened\"></mwl-calendar-slide-box></div></div>');\n            $templateCache.put('templates/week.html', '<div class=\"cal-week-box\"><div class=\"cal-row-fluid cal-row-head\"><div class=\"cal-cell1\" ng-repeat=\"column in view.columns track by $index\" ng-class=\"{\\n        \\'cal-day-weekend\\': column.isWeekend,\\n        \\'cal-day-past\\': column.isPast,\\n        \\'cal-day-today\\': column.isToday,\\n        \\'cal-day-future\\': column.isFuture}\">{{ column.weekDay }}<br><small><span data-cal-date ng-click=\"drillDown(column.day)\" class=\"pointer\">{{ column.date }}</span></small></div></div><div class=\"cal-row-fluid\" ng-repeat=\"event in view.events track by $index\"><div class=\"cal-cell{{ event.daySpan }} cal-offset{{ event.dayOffset }} day-highlight dh-event-{{ event.type }}\" data-event-class><a href=\"javascript:;\" ng-click=\"eventClick({calendarEvent: event})\" class=\"cal-event-week\">{{ event.title }}</a></div></div></div>');\n            $templateCache.put('templates/year.html', '<div class=\"cal-year-box\"><div ng-repeat=\"year in view track by $index\"><div class=\"row cal-before-eventlist\"><div class=\"span3 col-md-3 col-xs-6 cal-cell\" ng-repeat=\"month in year track by $index\" ng-click=\"monthClicked($parent.$index, $index)\" ng-class=\"{pointer: month.events.length > 0, \\'cal-day-today\\': month.isToday}\"><span class=\"pull-right\" data-cal-date ng-click=\"drillDown(month.monthIndex)\">{{ month.label }}</span> <small class=\"cal-events-num badge badge-important pull-left\" ng-show=\"month.events.length > 0\">{{ month.events.length }}</small><div class=\"cal-day-tick\" ng-show=\"month.isOpened\"><i class=\"glyphicon glyphicon-chevron-up\"></i> <i class=\"fa fa-chevron-up\"></i></div></div></div><mwl-calendar-slide-box is-open=\"!year.isOpened\"></mwl-calendar-slide-box></div></div>');\n        }\n    ]);\n    'use strict';\n    /**\n * @ngdoc service\n * @name angularBootstrapCalendarApp.moment\n * @description\n * # moment\n * Constant in the angularBootstrapCalendarApp.\n */\n    angular.module('mwl.calendar').constant('moment', window.moment);\n    'use strict';\n    /**\n * @ngdoc service\n * @name angularBootstrapCalendarApp.calendarHelper\n * @description\n * # calendarHelper\n * Service in the angularBootstrapCalendarApp.\n */\n    angular.module('mwl.calendar').service('calendarHelper', [\n        '$filter',\n        'moment',\n        function calendarHelper($filter, moment) {\n            var self = this;\n            function isISOWeekBasedOnLocale() {\n                return moment().startOf('week').day() === 1;\n            }\n            function isISOWeek(userValue) {\n                //If a manual override has been set in the directive, use that\n                if (angular.isDefined(userValue)) {\n                    return userValue;\n                }\n                //Otherwise fallback to the locale\n                return isISOWeekBasedOnLocale();\n            }\n            function getEventsInPeriod(calendarDate, period, allEvents) {\n                var startPeriod = moment(calendarDate).startOf(period);\n                var endPeriod = moment(calendarDate).endOf(period);\n                return allEvents.filter(function (event) {\n                    return self.eventIsInPeriod(event.starts_at, event.ends_at, startPeriod, endPeriod);\n                });\n            }\n            this.getMonthNames = function (short) {\n                var format = short ? 'MMM' : 'MMMM';\n                var months = [];\n                for (var i = 0; i <= 11; i++) {\n                    months.push($filter('date')(new Date(2014, i), format));\n                }\n                return months;\n            };\n            this.getWeekDayNames = function (short, useISOWeek) {\n                var format = short ? 'EEE' : 'EEEE';\n                var weekdays = [];\n                var startDay = isISOWeek(useISOWeek) ? 22 : 21;\n                for (var i = 0; i <= 6; i++) {\n                    weekdays.push($filter('date')(new Date(2014, 8, startDay + i), format));\n                }\n                return weekdays;\n            };\n            this.eventIsInPeriod = function (eventStart, eventEnd, periodStart, periodEnd) {\n                eventStart = moment(eventStart);\n                eventEnd = moment(eventEnd);\n                periodStart = moment(periodStart);\n                periodEnd = moment(periodEnd);\n                return eventStart.isAfter(periodStart) && eventStart.isBefore(periodEnd) || eventEnd.isAfter(periodStart) && eventEnd.isBefore(periodEnd) || eventStart.isBefore(periodStart) && eventEnd.isAfter(periodEnd) || eventStart.isSame(periodStart) || eventEnd.isSame(periodEnd);\n            };\n            this.getYearView = function (events, currentDay) {\n                var grid = [];\n                var months = self.getMonthNames();\n                var eventsInPeriod = getEventsInPeriod(currentDay, 'year', events);\n                for (var i = 0; i < 3; i++) {\n                    var row = [];\n                    for (var j = 0; j < 4; j++) {\n                        var monthIndex = 12 - months.length;\n                        var startPeriod = new Date(moment(currentDay).format('YYYY'), monthIndex, 1);\n                        var endPeriod = moment(startPeriod).add(1, 'month').subtract(1, 'second').toDate();\n                        row.push({\n                            label: months.shift(),\n                            monthIndex: monthIndex,\n                            isToday: moment(startPeriod).startOf('month').isSame(moment().startOf('month')),\n                            events: eventsInPeriod.filter(function (event) {\n                                return self.eventIsInPeriod(event.starts_at, event.ends_at, startPeriod, endPeriod);\n                            }),\n                            date: moment(startPeriod).startOf('month')\n                        });\n                    }\n                    grid.push(row);\n                }\n                return grid;\n            };\n            this.getMonthView = function (events, currentDay, useISOWeek) {\n                var eventsInPeriod = getEventsInPeriod(currentDay, 'month', events);\n                var dateOffset = isISOWeek(useISOWeek) ? 1 : 0;\n                var startOfMonth = moment(currentDay).startOf('month');\n                var numberOfDaysInMonth = moment(currentDay).endOf('month').date();\n                var grid = [];\n                var buildRow = new Array(7);\n                var eventsWithIds = eventsInPeriod.map(function (event, index) {\n                    event.$id = index;\n                    return event;\n                });\n                function getWeekDayIndex() {\n                    var day = startOfMonth.day() - dateOffset;\n                    if (day < 0) {\n                        day = 6;\n                    }\n                    return day;\n                }\n                for (var i = 1; i <= numberOfDaysInMonth; i++) {\n                    if (i === 1) {\n                        var weekdayIndex = getWeekDayIndex(startOfMonth);\n                        var prefillMonth = startOfMonth.clone();\n                        while (weekdayIndex > 0) {\n                            weekdayIndex--;\n                            prefillMonth = prefillMonth.subtract(1, 'day');\n                            buildRow[weekdayIndex] = {\n                                label: prefillMonth.date(),\n                                date: prefillMonth.clone(),\n                                inMonth: false,\n                                isPast: moment().startOf('day').isAfter(prefillMonth),\n                                isToday: moment().startOf('day').isSame(prefillMonth),\n                                isFuture: moment().startOf('day').isBefore(prefillMonth),\n                                events: []\n                            };\n                        }\n                    }\n                    buildRow[getWeekDayIndex(startOfMonth)] = {\n                        label: startOfMonth.date(),\n                        inMonth: true,\n                        isPast: moment().startOf('day').isAfter(startOfMonth),\n                        isToday: moment().startOf('day').isSame(startOfMonth),\n                        isFuture: moment().startOf('day').isBefore(startOfMonth),\n                        isWeekend: [\n                            0,\n                            6\n                        ].indexOf(moment(startOfMonth).day()) > -1,\n                        date: startOfMonth.clone(),\n                        events: eventsWithIds.filter(function (event) {\n                            return self.eventIsInPeriod(event.starts_at, event.ends_at, startOfMonth.clone().startOf('day'), startOfMonth.clone().endOf('day'));\n                        })\n                    };\n                    if (i === numberOfDaysInMonth) {\n                        weekdayIndex = getWeekDayIndex(startOfMonth);\n                        var postfillMonth = startOfMonth.clone();\n                        while (weekdayIndex < 6) {\n                            weekdayIndex++;\n                            postfillMonth = postfillMonth.add(1, 'day');\n                            buildRow[weekdayIndex] = {\n                                label: postfillMonth.date(),\n                                date: postfillMonth.clone(),\n                                inMonth: false,\n                                isPast: moment().startOf('day').isAfter(postfillMonth),\n                                isToday: moment().startOf('day').isSame(postfillMonth),\n                                isFuture: moment().startOf('day').isBefore(postfillMonth),\n                                events: []\n                            };\n                        }\n                    }\n                    if (getWeekDayIndex(startOfMonth) === 6 || i === numberOfDaysInMonth) {\n                        grid.push(buildRow);\n                        buildRow = new Array(7);\n                    }\n                    startOfMonth = startOfMonth.add(1, 'day');\n                }\n                return grid;\n            };\n            this.getWeekView = function (events, currentDay, useISOWeek) {\n                var eventsInPeriod = getEventsInPeriod(currentDay, 'week', events);\n                var dateOffset = isISOWeek(useISOWeek) ? 1 : 0;\n                var columns = new Array(7);\n                var weekDays = self.getWeekDayNames(false, useISOWeek);\n                var currentWeekDayIndex = currentDay.getDay();\n                var beginningOfWeek, endOfWeek, i, date;\n                for (i = currentWeekDayIndex; i >= 0; i--) {\n                    date = moment(currentDay).subtract(currentWeekDayIndex - i, 'days').add(dateOffset, 'day').toDate();\n                    columns[i] = {\n                        weekDay: weekDays[i],\n                        day: $filter('date')(date, 'd'),\n                        date: $filter('date')(date, 'd MMM'),\n                        isPast: moment(date).startOf('day').isBefore(moment().startOf('day')),\n                        isToday: moment(date).startOf('day').isSame(moment().startOf('day')),\n                        isFuture: moment(date).startOf('day').isAfter(moment().startOf('day')),\n                        isWeekend: [\n                            0,\n                            6\n                        ].indexOf(moment(date).day()) > -1\n                    };\n                    if (i === 0) {\n                        beginningOfWeek = date;\n                    } else if (i === 6) {\n                        endOfWeek = date;\n                    }\n                }\n                for (i = currentWeekDayIndex + 1; i < 7; i++) {\n                    date = moment(currentDay).add(i - currentWeekDayIndex, 'days').add(dateOffset, 'day').toDate();\n                    columns[i] = {\n                        weekDay: weekDays[i],\n                        day: $filter('date')(date, 'd'),\n                        date: $filter('date')(date, 'd MMM'),\n                        isPast: moment(date).startOf('day').isBefore(moment().startOf('day')),\n                        isToday: moment(date).startOf('day').isSame(moment().startOf('day')),\n                        isFuture: moment(date).startOf('day').isAfter(moment().startOf('day')),\n                        isWeekend: [\n                            0,\n                            6\n                        ].indexOf(moment(date).day()) > -1\n                    };\n                    if (i === 0) {\n                        beginningOfWeek = date;\n                    } else if (i === 6) {\n                        endOfWeek = date;\n                    }\n                }\n                endOfWeek = moment(endOfWeek).endOf('day').toDate();\n                beginningOfWeek = moment(beginningOfWeek).startOf('day').toDate();\n                var eventsSorted = eventsInPeriod.filter(function (event) {\n                    return self.eventIsInPeriod(event.starts_at, event.ends_at, beginningOfWeek, endOfWeek);\n                }).map(function (event) {\n                    var eventStart = moment(event.starts_at).startOf('day');\n                    var eventEnd = moment(event.ends_at).startOf('day');\n                    var weekViewStart = moment(beginningOfWeek).startOf('day');\n                    var weekViewEnd = moment(endOfWeek).startOf('day');\n                    var offset, span;\n                    if (eventStart.isBefore(weekViewStart) || eventStart.isSame(weekViewStart)) {\n                        offset = 0;\n                    } else {\n                        offset = eventStart.diff(weekViewStart, 'days');\n                    }\n                    if (eventEnd.isAfter(weekViewEnd)) {\n                        eventEnd = weekViewEnd;\n                    }\n                    if (eventStart.isBefore(weekViewStart)) {\n                        eventStart = weekViewStart;\n                    }\n                    span = moment(eventEnd).diff(eventStart, 'days') + 1;\n                    event.daySpan = span;\n                    event.dayOffset = offset;\n                    return event;\n                });\n                return {\n                    columns: columns,\n                    events: eventsSorted\n                };\n            };\n            this.getDayView = function (events, currentDay, dayStartHour, dayEndHour, dayHeight) {\n                var eventsInPeriod = getEventsInPeriod(currentDay, 'day', events);\n                var calendarStart = moment(currentDay).startOf('day').add(dayStartHour, 'hours');\n                var calendarEnd = moment(currentDay).startOf('day').add(dayEndHour, 'hours');\n                var calendarHeight = (dayEndHour - dayStartHour + 1) * dayHeight;\n                var dayHeightMultiplier = dayHeight / 60;\n                var buckets = [];\n                return eventsInPeriod.filter(function (event) {\n                    return self.eventIsInPeriod(event.starts_at, event.ends_at, moment(currentDay).startOf('day').toDate(), moment(currentDay).endOf('day').toDate());\n                }).map(function (event) {\n                    if (moment(event.starts_at).isBefore(calendarStart)) {\n                        event.top = 0;\n                    } else {\n                        event.top = moment(event.starts_at).startOf('minute').diff(calendarStart.startOf('minute'), 'minutes') * dayHeightMultiplier - 2;\n                    }\n                    if (moment(event.ends_at).isAfter(calendarEnd)) {\n                        event.height = calendarHeight - event.top;\n                    } else {\n                        var diffStart = event.starts_at;\n                        if (moment(event.starts_at).isBefore(calendarStart)) {\n                            diffStart = calendarStart.toDate();\n                        }\n                        event.height = moment(event.ends_at).diff(diffStart, 'minutes') * dayHeightMultiplier;\n                    }\n                    if (event.top - event.height > calendarHeight) {\n                        event.height = 0;\n                    }\n                    event.left = 0;\n                    return event;\n                }).filter(function (event) {\n                    return event.height > 0;\n                }).map(function (event) {\n                    var cannotFitInABucket = true;\n                    buckets.forEach(function (bucket, bucketIndex) {\n                        var canFitInThisBucket = true;\n                        bucket.forEach(function (bucketItem) {\n                            if (self.eventIsInPeriod(event.starts_at, event.ends_at, bucketItem.starts_at, bucketItem.ends_at) || self.eventIsInPeriod(bucketItem.starts_at, bucketItem.ends_at, event.starts_at, event.ends_at)) {\n                                canFitInThisBucket = false;\n                            }\n                        });\n                        if (canFitInThisBucket && cannotFitInABucket) {\n                            cannotFitInABucket = false;\n                            event.left = bucketIndex * 150;\n                            buckets[bucketIndex].push(event);\n                        }\n                    });\n                    if (cannotFitInABucket) {\n                        event.left = buckets.length * 150;\n                        buckets.push([event]);\n                    }\n                    return event;\n                });\n            };\n            this.toggleEventBreakdown = function (view, rowIndex, cellIndex) {\n                var openEvents = [];\n                function closeAllOpenItems() {\n                    view = view.map(function (row) {\n                        row.isOpened = false;\n                        return row.map(function (cell) {\n                            cell.isOpened = false;\n                            return cell;\n                        });\n                    });\n                }\n                if (view[rowIndex][cellIndex].events.length > 0) {\n                    var isCellOpened = view[rowIndex][cellIndex].isOpened;\n                    closeAllOpenItems();\n                    view[rowIndex][cellIndex].isOpened = !isCellOpened;\n                    view[rowIndex].isOpened = !isCellOpened;\n                    openEvents = view[rowIndex][cellIndex].events;\n                } else {\n                    closeAllOpenItems();\n                }\n                return {\n                    view: view,\n                    openEvents: openEvents\n                };\n            };\n        }\n    ]);\n    'use strict';\n    angular.module('mwl.calendar').filter('truncateEventTitle', function () {\n        return function (string, length, boxHeight) {\n            if (!string) {\n                return '';\n            }\n            //Only truncate if if actually needs truncating\n            if (string.length >= length && string.length / 20 > boxHeight / 30) {\n                return string.substr(0, length) + '...';\n            } else {\n                return string;\n            }\n        };\n    });\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCollapseFallback', [\n        '$injector',\n        function ($injector) {\n            if ($injector.has('collapseDirective')) {\n                return {};\n            }\n            return {\n                restrict: 'A',\n                controller: [\n                    '$scope',\n                    '$attrs',\n                    '$element',\n                    function ($scope, $attrs, $element) {\n                        var unbindWatcher = $scope.$watch($attrs.mwlCollapseFallback, function (shouldCollapse) {\n                            if (shouldCollapse) {\n                                $element.addClass('ng-hide');\n                            } else {\n                                $element.removeClass('ng-hide');\n                            }\n                        });\n                        var unbindDestroy = $scope.$on('$destroy', function () {\n                            unbindDestroy();\n                            unbindWatcher();\n                        });\n                    }\n                ]\n            };\n        }\n    ]);\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCalendarYear', [\n        'moment',\n        function (moment) {\n            return {\n                templateUrl: 'templates/year.html',\n                restrict: 'EA',\n                require: '^mwlCalendar',\n                scope: {\n                    events: '=calendarEvents',\n                    currentDay: '=calendarCurrentDay',\n                    eventClick: '=calendarEventClick',\n                    eventEditClick: '=calendarEditEventClick',\n                    eventDeleteClick: '=calendarDeleteEventClick',\n                    editEventHtml: '=calendarEditEventHtml',\n                    deleteEventHtml: '=calendarDeleteEventHtml',\n                    autoOpen: '=calendarAutoOpen',\n                    timespanClick: '=calendarTimespanClick'\n                },\n                controller: [\n                    '$scope',\n                    '$sce',\n                    '$timeout',\n                    'calendarHelper',\n                    function ($scope, $sce, $timeout, calendarHelper) {\n                        var firstRun = false;\n                        $scope.$sce = $sce;\n                        function updateView() {\n                            $scope.view = calendarHelper.getYearView($scope.events, $scope.currentDay);\n                            //Auto open the calendar to the current day if set\n                            if ($scope.autoOpen && !firstRun) {\n                                $scope.view.forEach(function (row, rowIndex) {\n                                    row.forEach(function (year, cellIndex) {\n                                        if (year.label === moment($scope.currentDay).format('MMMM')) {\n                                            $scope.monthClicked(rowIndex, cellIndex, true);\n                                            $timeout(function () {\n                                                firstRun = false;\n                                            });\n                                        }\n                                    });\n                                });\n                            }\n                        }\n                        $scope.$watch('currentDay', updateView);\n                        $scope.$watch('events', updateView, true);\n                        $scope.monthClicked = function (yearIndex, monthIndex, monthClickedFirstRun) {\n                            if (!monthClickedFirstRun) {\n                                $scope.timespanClick({ calendarDate: $scope.view[yearIndex][monthIndex].date.startOf('month').toDate() });\n                            }\n                            var handler = calendarHelper.toggleEventBreakdown($scope.view, yearIndex, monthIndex);\n                            $scope.view = handler.view;\n                            $scope.openEvents = handler.openEvents;\n                        };\n                        $scope.drillDown = function (month) {\n                            var date = moment($scope.currentDay).clone().month(month).toDate();\n                            if ($scope.timespanClick({ calendarDate: date }) !== false) {\n                                $scope.calendarCtrl.changeView('month', date);\n                            }\n                        };\n                    }\n                ],\n                link: function (scope, element, attrs, calendarCtrl) {\n                    scope.calendarCtrl = calendarCtrl;\n                }\n            };\n        }\n    ]);\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCalendarWeek', function () {\n        return {\n            templateUrl: 'templates/week.html',\n            restrict: 'EA',\n            require: '^mwlCalendar',\n            scope: {\n                events: '=calendarEvents',\n                currentDay: '=calendarCurrentDay',\n                eventClick: '=calendarEventClick',\n                useIsoWeek: '=calendarUseIsoWeek',\n                timespanClick: '=calendarTimespanClick'\n            },\n            controller: [\n                '$scope',\n                'moment',\n                'calendarHelper',\n                function ($scope, moment, calendarHelper) {\n                    function updateView() {\n                        $scope.view = calendarHelper.getWeekView($scope.events, $scope.currentDay, $scope.useIsoWeek);\n                    }\n                    $scope.drillDown = function (day) {\n                        var date = moment($scope.currentDay).clone().date(day).toDate();\n                        if ($scope.timespanClick({ calendarDate: date }) !== false) {\n                            $scope.calendarCtrl.changeView('day', date);\n                        }\n                    };\n                    $scope.$watch('currentDay', updateView);\n                    $scope.$watch('events', updateView, true);\n                }\n            ],\n            link: function (scope, element, attrs, calendarCtrl) {\n                scope.calendarCtrl = calendarCtrl;\n            }\n        };\n    });\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCalendarSlideBox', function () {\n        return {\n            restrict: 'EA',\n            templateUrl: 'templates/calendarSlideBox.html',\n            replace: true,\n            controller: [\n                '$scope',\n                '$attrs',\n                function ($scope, $attrs) {\n                    var unbindWatcher = $scope.$watch($attrs.isOpen, function (shouldCollapse) {\n                        $scope.shouldCollapse = shouldCollapse;\n                    });\n                    var unbindDestroy = $scope.$on('$destroy', function () {\n                        unbindDestroy();\n                        unbindWatcher();\n                    });\n                }\n            ],\n            require: [\n                '^?mwlCalendarMonth',\n                '^?mwlCalendarYear'\n            ],\n            link: function (scope, elm, attrs, ctrls) {\n                scope.isMonthView = !!ctrls[0];\n                scope.isYearView = !!ctrls[1];\n            }\n        };\n    });\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCalendarMonth', function () {\n        return {\n            templateUrl: 'templates/month.html',\n            restrict: 'EA',\n            require: '^mwlCalendar',\n            scope: {\n                events: '=calendarEvents',\n                currentDay: '=calendarCurrentDay',\n                eventClick: '=calendarEventClick',\n                eventEditClick: '=calendarEditEventClick',\n                eventDeleteClick: '=calendarDeleteEventClick',\n                editEventHtml: '=calendarEditEventHtml',\n                deleteEventHtml: '=calendarDeleteEventHtml',\n                autoOpen: '=calendarAutoOpen',\n                useIsoWeek: '=calendarUseIsoWeek',\n                timespanClick: '=calendarTimespanClick'\n            },\n            controller: [\n                '$scope',\n                '$sce',\n                '$timeout',\n                'moment',\n                'calendarHelper',\n                function ($scope, $sce, $timeout, moment, calendarHelper) {\n                    var firstRun = false;\n                    $scope.$sce = $sce;\n                    function updateView() {\n                        $scope.view = calendarHelper.getMonthView($scope.events, $scope.currentDay, $scope.useIsoWeek);\n                        //Auto open the calendar to the current day if set\n                        if ($scope.autoOpen && !firstRun) {\n                            $scope.view.forEach(function (week, rowIndex) {\n                                week.forEach(function (day, cellIndex) {\n                                    if (day.inMonth && moment($scope.currentDay).startOf('day').isSame(day.date.startOf('day'))) {\n                                        $scope.dayClicked(rowIndex, cellIndex, true);\n                                        $timeout(function () {\n                                            firstRun = false;\n                                        });\n                                    }\n                                });\n                            });\n                        }\n                    }\n                    $scope.$watch('currentDay', updateView);\n                    $scope.$watch('events', updateView, true);\n                    $scope.weekDays = calendarHelper.getWeekDayNames(false, $scope.useIsoWeek);\n                    $scope.dayClicked = function (rowIndex, cellIndex, dayClickedFirstRun) {\n                        if (!dayClickedFirstRun) {\n                            $scope.timespanClick({ calendarDate: $scope.view[rowIndex][cellIndex].date.startOf('day').toDate() });\n                        }\n                        var handler = calendarHelper.toggleEventBreakdown($scope.view, rowIndex, cellIndex);\n                        $scope.view = handler.view;\n                        $scope.openEvents = handler.openEvents;\n                    };\n                    $scope.drillDown = function (day) {\n                        var date = moment($scope.currentDay).clone().date(day).toDate();\n                        if ($scope.timespanClick({ calendarDate: date }) !== false) {\n                            $scope.calendarCtrl.changeView('day', date);\n                        }\n                    };\n                    $scope.highlightEvent = function (event, shouldAddClass) {\n                        $scope.view.forEach(function (week) {\n                            week.forEach(function (day) {\n                                delete day.highlightClass;\n                                if (shouldAddClass) {\n                                    var dayContainsEvent = day.events.filter(function (e) {\n                                        return e.$id === event.$id;\n                                    }).length > 0;\n                                    if (dayContainsEvent) {\n                                        day.highlightClass = 'day-highlight dh-event-' + event.type;\n                                    }\n                                }\n                            });\n                        });\n                    };\n                }\n            ],\n            link: function (scope, element, attrs, calendarCtrl) {\n                scope.calendarCtrl = calendarCtrl;\n            }\n        };\n    });\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCalendarDay', function () {\n        return {\n            templateUrl: 'templates/day.html',\n            restrict: 'EA',\n            require: '^mwlCalendar',\n            scope: {\n                events: '=calendarEvents',\n                currentDay: '=calendarCurrentDay',\n                eventClick: '=calendarEventClick',\n                eventLabel: '@calendarEventLabel',\n                timeLabel: '@calendarTimeLabel',\n                dayViewStart: '@calendarDayViewStart',\n                dayViewEnd: '@calendarDayViewEnd',\n                dayViewSplit: '@calendarDayViewSplit'\n            },\n            controller: [\n                '$scope',\n                'moment',\n                'calendarHelper',\n                function ($scope, moment, calendarHelper) {\n                    var dayViewStart = moment($scope.dayViewStart || '00:00', 'HH:mm');\n                    var dayViewEnd = moment($scope.dayViewEnd || '23:00', 'HH:mm');\n                    $scope.dayViewSplit = parseInt($scope.dayViewSplit);\n                    $scope.dayHeight = 60 / $scope.dayViewSplit * 30;\n                    $scope.days = [];\n                    var dayCounter = moment(dayViewStart);\n                    for (var i = 0; i <= dayViewEnd.diff(dayViewStart, 'hours'); i++) {\n                        $scope.days.push({ label: dayCounter.format('ha') });\n                        dayCounter.add(1, 'hour');\n                    }\n                    function updateView() {\n                        $scope.view = calendarHelper.getDayView($scope.events, $scope.currentDay, dayViewStart.hours(), dayViewEnd.hours(), $scope.dayHeight);\n                    }\n                    $scope.$watch('currentDay', updateView);\n                    $scope.$watch('events', updateView, true);\n                }\n            ]\n        };\n    });\n    'use strict';\n    angular.module('mwl.calendar').directive('mwlCalendar', function () {\n        return {\n            templateUrl: 'templates/main.html',\n            restrict: 'EA',\n            scope: {\n                events: '=calendarEvents',\n                view: '=calendarView',\n                currentDay: '=calendarCurrentDay',\n                control: '=calendarControl',\n                eventClick: '&calendarEventClick',\n                eventEditClick: '&calendarEditEventClick',\n                eventDeleteClick: '&calendarDeleteEventClick',\n                editEventHtml: '=calendarEditEventHtml',\n                deleteEventHtml: '=calendarDeleteEventHtml',\n                autoOpen: '=calendarAutoOpen',\n                useIsoWeek: '=calendarUseIsoWeek',\n                eventLabel: '@calendarEventLabel',\n                timeLabel: '@calendarTimeLabel',\n                dayViewStart: '@calendarDayViewStart',\n                dayViewEnd: '@calendarDayViewEnd',\n                weekTitleLabel: '@calendarWeekTitleLabel',\n                timespanClick: '&calendarTimespanClick',\n                dayViewSplit: '@calendarDayViewSplit'\n            },\n            controller: [\n                '$scope',\n                '$timeout',\n                '$locale',\n                '$filter',\n                'moment',\n                function ($scope, $timeout, $locale, $filter, moment) {\n                    var self = this;\n                    var weekTitleLabel = $scope.weekTitleLabel || 'Week {week} of {year}';\n                    this.titleFunctions = {\n                        day: function (currentDay) {\n                            return $filter('date')(currentDay, 'EEEE d MMMM, yyyy');\n                        },\n                        week: function (currentDay) {\n                            return weekTitleLabel.replace('{week}', moment(currentDay).week()).replace('{year}', moment(currentDay).format('YYYY'));\n                        },\n                        month: function (currentDay) {\n                            return $filter('date')(currentDay, 'MMMM yyyy');\n                        },\n                        year: function (currentDay) {\n                            return moment(currentDay).format('YYYY');\n                        }\n                    };\n                    this.changeView = function (view, newDay) {\n                        $scope.view = view;\n                        $scope.currentDay = newDay;\n                    };\n                    $scope.control = $scope.control || {};\n                    $scope.control.prev = function () {\n                        $scope.currentDay = moment($scope.currentDay).subtract(1, $scope.view).toDate();\n                    };\n                    $scope.control.next = function () {\n                        $scope.currentDay = moment($scope.currentDay).add(1, $scope.view).toDate();\n                    };\n                    $scope.control.getTitle = function () {\n                        if (!self.titleFunctions[$scope.view]) {\n                            return '';\n                        }\n                        return self.titleFunctions[$scope.view]($scope.currentDay);\n                    };\n                    //Auto update the calendar when the locale changes\n                    var firstRunWatcher = true;\n                    var unbindWatcher = $scope.$watch(function () {\n                        return moment.locale() + $locale.id;\n                    }, function () {\n                        if (firstRunWatcher) {\n                            //dont run the first time the calendar is initialised\n                            firstRunWatcher = false;\n                            return;\n                        }\n                        var originalView = angular.copy($scope.view);\n                        $scope.view = 'redraw';\n                        $timeout(function () {\n                            //bit of a hacky way to redraw the calendar, should be refactored at some point\n                            $scope.view = originalView;\n                        });\n                    });\n                    //Remove the watcher when the calendar is destroyed\n                    var unbindDestroyListener = $scope.$on('$destroy', function () {\n                        unbindDestroyListener();\n                        unbindWatcher();\n                    });\n                }\n            ]\n        };\n    });\n}(window, angular));","'use strict';\n\nangular.module('mwl.calendar', []);\n","angular.module(\"mwl.calendar\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"templates/calendarSlideBox.html\",\"<div class=\\\"cal-slide-box\\\" collapse=\\\"shouldCollapse\\\" mwl-collapse-fallback=\\\"shouldCollapse\\\"><div class=\\\"cal-slide-content cal-event-list\\\"><ul class=\\\"unstyled list-unstyled\\\"><li ng-repeat=\\\"event in openEvents track by $index\\\"><span class=\\\"pull-left event\\\" ng-class=\\\"\\'event-\\' + event.type\\\"></span> &nbsp; <a href=\\\"javascript:;\\\" class=\\\"event-item\\\" ng-click=\\\"eventClick({calendarEvent: event})\\\">{{ event.title }} <span ng-show=\\\"isMonthView\\\">({{ event.starts_at | date:\\'shortTime\\' }})</span> <span ng-show=\\\"isYearView\\\">({{ event.starts_at | date:\\'MMM d, h:mm a\\' }})</span></a> <a href=\\\"javascript:;\\\" class=\\\"event-item-edit\\\" ng-if=\\\"editEventHtml && event.editable !== false\\\" ng-bind-html=\\\"$sce.trustAsHtml(editEventHtml)\\\" ng-click=\\\"eventEditClick({calendarEvent: event})\\\"></a> <a href=\\\"javascript:;\\\" class=\\\"event-item-delete\\\" ng-if=\\\"deleteEventHtml && event.deletable !== false\\\" ng-bind-html=\\\"$sce.trustAsHtml(deleteEventHtml)\\\" ng-click=\\\"eventDeleteClick({calendarEvent: event})\\\"></a></li></ul></div></div>\");\n$templateCache.put(\"templates/day.html\",\"<div class=\\\"cal-day-box\\\"><div class=\\\"row-fluid clearfix cal-row-head\\\"><div class=\\\"span1 col-xs-1 cal-cell\\\">{{ timeLabel || \\'Time\\' }}</div><div class=\\\"span11 col-xs-11 cal-cell\\\">{{ eventLabel || \\'Events\\' }}</div></div><div class=\\\"cal-day-panel\\\" class=\\\"clearfix\\\" ng-style=\\\"{height: (days.length * dayHeight) + \\'px\\'}\\\"><div class=\\\"cal-day-panel-hour\\\"><div class=\\\"cal-day-hour\\\" ng-repeat=\\\"day in days track by $index\\\"><div class=\\\"row-fluid cal-day-hour-part\\\"><div class=\\\"span1 col-xs-1\\\"><strong>{{ day.label }}</strong></div><div class=\\\"span11 col-xs-11\\\"></div></div><div class=\\\"row-fluid cal-day-hour-part\\\"><div class=\\\"span1 col-xs-1\\\"></div><div class=\\\"span11 col-xs-11\\\"></div></div><div class=\\\"row-fluid cal-day-hour-part\\\" ng-show=\\\"dayViewSplit < 30\\\"><div class=\\\"span1 col-xs-1\\\"></div><div class=\\\"span11 col-xs-11\\\"></div></div><div class=\\\"row-fluid cal-day-hour-part\\\" ng-show=\\\"dayViewSplit < 30\\\"><div class=\\\"span1 col-xs-1\\\"></div><div class=\\\"span11 col-xs-11\\\"></div></div><div class=\\\"row-fluid cal-day-hour-part\\\" ng-show=\\\"dayViewSplit < 15\\\"><div class=\\\"span1 col-xs-1\\\"></div><div class=\\\"span11 col-xs-11\\\"></div></div><div class=\\\"row-fluid cal-day-hour-part\\\" ng-show=\\\"dayViewSplit < 15\\\"><div class=\\\"span1 col-xs-1\\\"></div><div class=\\\"span11 col-xs-11\\\"></div></div></div></div><div class=\\\"pull-left day-event day-highlight dh-event-{{ event.type }}\\\" ng-repeat=\\\"event in view track by $index\\\" ng-style=\\\"{top: event.top + \\'px\\', left: event.left + 60 + \\'px\\', height: event.height + \\'px\\'}\\\"><a href=\\\"javascript:;\\\" class=\\\"event-item\\\" ng-click=\\\"eventClick({calendarEvent: event})\\\"><span>{{ event.title | truncateEventTitle:20:event.height }}</span></a></div></div></div>\");\n$templateCache.put(\"templates/main.html\",\"<div class=\\\"cal-context\\\" ng-switch=\\\"view\\\"><div class=\\\"alert alert-danger\\\" ng-switch-default>The value passed to calendar-view is not set</div><mwl-calendar-year calendar-events=\\\"events\\\" calendar-current-day=\\\"currentDay\\\" calendar-event-click=\\\"eventClick\\\" calendar-edit-event-click=\\\"eventEditClick\\\" calendar-delete-event-click=\\\"eventDeleteClick\\\" calendar-edit-event-html=\\\"editEventHtml\\\" calendar-delete-event-html=\\\"deleteEventHtml\\\" calendar-auto-open=\\\"autoOpen\\\" calendar-timespan-click=\\\"timespanClick\\\" ng-switch-when=\\\"year\\\"></mwl-calendar-year><mwl-calendar-month calendar-events=\\\"events\\\" calendar-current-day=\\\"currentDay\\\" calendar-event-click=\\\"eventClick\\\" calendar-edit-event-click=\\\"eventEditClick\\\" calendar-delete-event-click=\\\"eventDeleteClick\\\" calendar-edit-event-html=\\\"editEventHtml\\\" calendar-delete-event-html=\\\"deleteEventHtml\\\" calendar-auto-open=\\\"autoOpen\\\" calendar-use-iso-week=\\\"useIsoWeek\\\" calendar-timespan-click=\\\"timespanClick\\\" ng-switch-when=\\\"month\\\"></mwl-calendar-month><mwl-calendar-week calendar-events=\\\"events\\\" calendar-current-day=\\\"currentDay\\\" calendar-event-click=\\\"eventClick\\\" calendar-use-iso-week=\\\"useIsoWeek\\\" calendar-timespan-click=\\\"timespanClick\\\" ng-switch-when=\\\"week\\\"></mwl-calendar-week><mwl-calendar-day calendar-events=\\\"events\\\" calendar-current-day=\\\"currentDay\\\" calendar-event-click=\\\"eventClick\\\" calendar-event-label=\\\"{{ eventLabel }}\\\" calendar-time-label=\\\"{{ timeLabel }}\\\" calendar-day-view-start=\\\"{{ dayViewStart }}\\\" calendar-day-view-end=\\\"{{ dayViewEnd }}\\\" calendar-day-view-split=\\\"{{ dayViewSplit || 30 }}\\\" ng-switch-when=\\\"day\\\"></mwl-calendar-day></div>\");\n$templateCache.put(\"templates/month.html\",\"<div class=\\\"cal-row-fluid cal-row-head\\\"><div class=\\\"cal-cell1\\\" ng-repeat=\\\"day in weekDays track by $index\\\">{{ day }}</div></div><div class=\\\"cal-month-box\\\"><div ng-repeat=\\\"week in view track by $index\\\"><div class=\\\"cal-row-fluid cal-before-eventlist\\\"><div class=\\\"cal-cell1 cal-cell {{ day.highlightClass }}\\\" ng-repeat=\\\"day in week track by $index\\\" ng-click=\\\"dayClicked($parent.$index, $index)\\\" ng-class=\\\"{pointer: day.events.length > 0}\\\"><div class=\\\"cal-month-day\\\" ng-class=\\\"{\\n            \\'cal-day-outmonth\\': !day.inMonth,\\n            \\'cal-day-inmonth\\': day.inMonth,\\n            \\'cal-day-weekend\\': day.isWeekend,\\n            \\'cal-day-past\\': day.isPast,\\n            \\'cal-day-today\\': day.isToday,\\n            \\'cal-day-future\\': day.isFuture\\n          }\\\"><small class=\\\"cal-events-num badge badge-important pull-left\\\" ng-show=\\\"day.events.length > 0\\\">{{ day.events.length }}</small> <span class=\\\"pull-right\\\" data-cal-date ng-click=\\\"drillDown(day.label)\\\">{{ day.label }}</span><div class=\\\"cal-day-tick\\\" ng-show=\\\"day.isOpened\\\"><i class=\\\"glyphicon glyphicon-chevron-up\\\"></i> <i class=\\\"fa fa-chevron-up\\\"></i></div><div class=\\\"events-list\\\" ng-show=\\\"day.events.length > 0\\\"><a href=\\\"javascript:;\\\" ng-click=\\\"eventClick({calendarEvent: event})\\\" ng-repeat=\\\"event in day.events track by $index\\\" class=\\\"pull-left event event-{{ event.type }}\\\" ng-mouseenter=\\\"highlightEvent(event, true)\\\" ng-mouseleave=\\\"highlightEvent(event, false)\\\" tooltip-append-to-body=\\\"true\\\" tooltip=\\\"{{ event.title }}\\\"></a></div></div></div></div><mwl-calendar-slide-box is-open=\\\"!week.isOpened\\\"></mwl-calendar-slide-box></div></div>\");\n$templateCache.put(\"templates/week.html\",\"<div class=\\\"cal-week-box\\\"><div class=\\\"cal-row-fluid cal-row-head\\\"><div class=\\\"cal-cell1\\\" ng-repeat=\\\"column in view.columns track by $index\\\" ng-class=\\\"{\\n        \\'cal-day-weekend\\': column.isWeekend,\\n        \\'cal-day-past\\': column.isPast,\\n        \\'cal-day-today\\': column.isToday,\\n        \\'cal-day-future\\': column.isFuture}\\\">{{ column.weekDay }}<br><small><span data-cal-date ng-click=\\\"drillDown(column.day)\\\" class=\\\"pointer\\\">{{ column.date }}</span></small></div></div><div class=\\\"cal-row-fluid\\\" ng-repeat=\\\"event in view.events track by $index\\\"><div class=\\\"cal-cell{{ event.daySpan }} cal-offset{{ event.dayOffset }} day-highlight dh-event-{{ event.type }}\\\" data-event-class><a href=\\\"javascript:;\\\" ng-click=\\\"eventClick({calendarEvent: event})\\\" class=\\\"cal-event-week\\\">{{ event.title }}</a></div></div></div>\");\n$templateCache.put(\"templates/year.html\",\"<div class=\\\"cal-year-box\\\"><div ng-repeat=\\\"year in view track by $index\\\"><div class=\\\"row cal-before-eventlist\\\"><div class=\\\"span3 col-md-3 col-xs-6 cal-cell\\\" ng-repeat=\\\"month in year track by $index\\\" ng-click=\\\"monthClicked($parent.$index, $index)\\\" ng-class=\\\"{pointer: month.events.length > 0, \\'cal-day-today\\': month.isToday}\\\"><span class=\\\"pull-right\\\" data-cal-date ng-click=\\\"drillDown(month.monthIndex)\\\">{{ month.label }}</span> <small class=\\\"cal-events-num badge badge-important pull-left\\\" ng-show=\\\"month.events.length > 0\\\">{{ month.events.length }}</small><div class=\\\"cal-day-tick\\\" ng-show=\\\"month.isOpened\\\"><i class=\\\"glyphicon glyphicon-chevron-up\\\"></i> <i class=\\\"fa fa-chevron-up\\\"></i></div></div></div><mwl-calendar-slide-box is-open=\\\"!year.isOpened\\\"></mwl-calendar-slide-box></div></div>\");}]);","'use strict';\n\n/**\n * @ngdoc service\n * @name angularBootstrapCalendarApp.moment\n * @description\n * # moment\n * Constant in the angularBootstrapCalendarApp.\n */\nangular.module('mwl.calendar')\n  .constant('moment', window.moment);\n","'use strict';\n\n/**\n * @ngdoc service\n * @name angularBootstrapCalendarApp.calendarHelper\n * @description\n * # calendarHelper\n * Service in the angularBootstrapCalendarApp.\n */\nangular.module('mwl.calendar')\n  .service('calendarHelper', function calendarHelper($filter, moment) {\n\n    var self = this;\n\n    function isISOWeekBasedOnLocale() {\n      return moment().startOf('week').day() === 1;\n    }\n\n    function isISOWeek(userValue) {\n      //If a manual override has been set in the directive, use that\n      if (angular.isDefined(userValue)) {\n        return userValue;\n      }\n      //Otherwise fallback to the locale\n      return isISOWeekBasedOnLocale();\n    }\n\n    function getEventsInPeriod(calendarDate, period, allEvents) {\n      var startPeriod = moment(calendarDate).startOf(period);\n      var endPeriod = moment(calendarDate).endOf(period);\n      return allEvents.filter(function(event) {\n        return self.eventIsInPeriod(event.starts_at, event.ends_at, startPeriod, endPeriod);\n      });\n    }\n\n    this.getMonthNames = function(short) {\n\n      var format = short ? 'MMM' : 'MMMM';\n\n      var months = [];\n      for (var i = 0; i <= 11; i++) {\n        months.push($filter('date')(new Date(2014, i), format));\n      }\n\n      return months;\n\n    };\n\n    this.getWeekDayNames = function(short, useISOWeek) {\n\n      var format = short ? 'EEE' : 'EEEE';\n\n      var weekdays = [];\n      var startDay = isISOWeek(useISOWeek) ? 22 : 21;\n      for (var i = 0; i <= 6; i++) {\n        weekdays.push($filter('date')(new Date(2014, 8, startDay + i), format));\n      }\n\n      return weekdays;\n\n    };\n\n    this.eventIsInPeriod = function(eventStart, eventEnd, periodStart, periodEnd) {\n\n      eventStart = moment(eventStart);\n      eventEnd = moment(eventEnd);\n      periodStart = moment(periodStart);\n      periodEnd = moment(periodEnd);\n\n      return (eventStart.isAfter(periodStart) && eventStart.isBefore(periodEnd)) ||\n        (eventEnd.isAfter(periodStart) && eventEnd.isBefore(periodEnd)) ||\n        (eventStart.isBefore(periodStart) && eventEnd.isAfter(periodEnd)) ||\n        eventStart.isSame(periodStart) ||\n        eventEnd.isSame(periodEnd);\n\n    };\n\n    this.getYearView = function(events, currentDay) {\n\n      var grid = [];\n      var months = self.getMonthNames();\n      var eventsInPeriod = getEventsInPeriod(currentDay, 'year', events);\n\n      for (var i = 0; i < 3; i++) {\n        var row = [];\n        for (var j = 0; j < 4; j++) {\n          var monthIndex = 12 - months.length;\n          var startPeriod = new Date(moment(currentDay).format('YYYY'), monthIndex, 1);\n          var endPeriod = moment(startPeriod).add(1, 'month').subtract(1, 'second').toDate();\n\n          row.push({\n            label: months.shift(),\n            monthIndex: monthIndex,\n            isToday: moment(startPeriod).startOf('month').isSame(moment().startOf('month')),\n            events: eventsInPeriod.filter(function(event) {\n              return self.eventIsInPeriod(event.starts_at, event.ends_at, startPeriod, endPeriod);\n            }),\n            date: moment(startPeriod).startOf('month')\n          });\n        }\n        grid.push(row);\n      }\n\n      return grid;\n\n    };\n\n    this.getMonthView = function(events, currentDay, useISOWeek) {\n\n      var eventsInPeriod = getEventsInPeriod(currentDay, 'month', events);\n\n      var dateOffset = isISOWeek(useISOWeek) ? 1 : 0;\n\n      var startOfMonth = moment(currentDay).startOf('month');\n      var numberOfDaysInMonth = moment(currentDay).endOf('month').date();\n\n      var grid = [];\n      var buildRow = new Array(7);\n      var eventsWithIds = eventsInPeriod.map(function(event, index) {\n        event.$id = index;\n        return event;\n      });\n\n      function getWeekDayIndex() {\n        var day = startOfMonth.day() - dateOffset;\n        if (day < 0) {\n          day = 6;\n        }\n        return day;\n      }\n\n      for (var i = 1; i <= numberOfDaysInMonth; i++) {\n\n        if (i === 1) {\n          var weekdayIndex = getWeekDayIndex(startOfMonth);\n          var prefillMonth = startOfMonth.clone();\n          while (weekdayIndex > 0) {\n            weekdayIndex--;\n            prefillMonth = prefillMonth.subtract(1, 'day');\n            buildRow[weekdayIndex] = {\n              label: prefillMonth.date(),\n              date: prefillMonth.clone(),\n              inMonth: false,\n              isPast: moment().startOf('day').isAfter(prefillMonth),\n              isToday: moment().startOf('day').isSame(prefillMonth),\n              isFuture: moment().startOf('day').isBefore(prefillMonth),\n              events: []\n            };\n          }\n        }\n\n        buildRow[getWeekDayIndex(startOfMonth)] = {\n          label: startOfMonth.date(),\n          inMonth: true,\n          isPast: moment().startOf('day').isAfter(startOfMonth),\n          isToday: moment().startOf('day').isSame(startOfMonth),\n          isFuture: moment().startOf('day').isBefore(startOfMonth),\n          isWeekend: [0, 6].indexOf(moment(startOfMonth).day()) > -1,\n          date: startOfMonth.clone(),\n          events: eventsWithIds.filter(function(event) {\n            return self.eventIsInPeriod(event.starts_at, event.ends_at, startOfMonth.clone().startOf('day'), startOfMonth.clone().endOf('day'));\n          })\n        };\n\n        if (i === numberOfDaysInMonth) {\n          weekdayIndex = getWeekDayIndex(startOfMonth);\n          var postfillMonth = startOfMonth.clone();\n          while (weekdayIndex < 6) {\n            weekdayIndex++;\n            postfillMonth = postfillMonth.add(1, 'day');\n            buildRow[weekdayIndex] = {\n              label: postfillMonth.date(),\n              date: postfillMonth.clone(),\n              inMonth: false,\n              isPast: moment().startOf('day').isAfter(postfillMonth),\n              isToday: moment().startOf('day').isSame(postfillMonth),\n              isFuture: moment().startOf('day').isBefore(postfillMonth),\n              events: []\n            };\n          }\n        }\n\n        if (getWeekDayIndex(startOfMonth) === 6 || i === numberOfDaysInMonth) {\n          grid.push(buildRow);\n          buildRow = new Array(7);\n        }\n\n        startOfMonth = startOfMonth.add(1, 'day');\n\n      }\n\n      return grid;\n\n    };\n\n    this.getWeekView = function(events, currentDay, useISOWeek) {\n\n      var eventsInPeriod = getEventsInPeriod(currentDay, 'week', events);\n      var dateOffset = isISOWeek(useISOWeek) ? 1 : 0;\n      var columns = new Array(7);\n      var weekDays = self.getWeekDayNames(false, useISOWeek);\n      var currentWeekDayIndex = currentDay.getDay();\n      var beginningOfWeek, endOfWeek, i, date;\n\n      for (i = currentWeekDayIndex; i >= 0; i--) {\n        date = moment(currentDay).subtract(currentWeekDayIndex - i, 'days').add(dateOffset, 'day').toDate();\n        columns[i] = {\n          weekDay: weekDays[i],\n          day: $filter('date')(date, 'd'),\n          date: $filter('date')(date, 'd MMM'),\n          isPast: moment(date).startOf('day').isBefore(moment().startOf('day')),\n          isToday: moment(date).startOf('day').isSame(moment().startOf('day')),\n          isFuture: moment(date).startOf('day').isAfter(moment().startOf('day')),\n          isWeekend: [0, 6].indexOf(moment(date).day()) > -1\n        };\n        if (i === 0) {\n          beginningOfWeek = date;\n        } else if (i === 6) {\n          endOfWeek = date;\n        }\n      }\n\n      for (i = currentWeekDayIndex + 1; i < 7; i++) {\n        date = moment(currentDay).add(i - currentWeekDayIndex, 'days').add(dateOffset, 'day').toDate();\n        columns[i] = {\n          weekDay: weekDays[i],\n          day: $filter('date')(date, 'd'),\n          date: $filter('date')(date, 'd MMM'),\n          isPast: moment(date).startOf('day').isBefore(moment().startOf('day')),\n          isToday: moment(date).startOf('day').isSame(moment().startOf('day')),\n          isFuture: moment(date).startOf('day').isAfter(moment().startOf('day')),\n          isWeekend: [0, 6].indexOf(moment(date).day()) > -1\n        };\n        if (i === 0) {\n          beginningOfWeek = date;\n        } else if (i === 6) {\n          endOfWeek = date;\n        }\n      }\n\n      endOfWeek = moment(endOfWeek).endOf('day').toDate();\n      beginningOfWeek = moment(beginningOfWeek).startOf('day').toDate();\n\n      var eventsSorted = eventsInPeriod.filter(function(event) {\n        return self.eventIsInPeriod(event.starts_at, event.ends_at, beginningOfWeek, endOfWeek);\n      }).map(function(event) {\n\n        var eventStart = moment(event.starts_at).startOf('day');\n        var eventEnd = moment(event.ends_at).startOf('day');\n        var weekViewStart = moment(beginningOfWeek).startOf('day');\n        var weekViewEnd = moment(endOfWeek).startOf('day');\n\n        var offset, span;\n\n        if (eventStart.isBefore(weekViewStart) || eventStart.isSame(weekViewStart)) {\n          offset = 0;\n        } else {\n          offset = eventStart.diff(weekViewStart, 'days');\n        }\n\n        if (eventEnd.isAfter(weekViewEnd)) {\n          eventEnd = weekViewEnd;\n        }\n\n        if (eventStart.isBefore(weekViewStart)) {\n          eventStart = weekViewStart;\n        }\n\n        span = moment(eventEnd).diff(eventStart, 'days') + 1;\n\n        event.daySpan = span;\n        event.dayOffset = offset;\n        return event;\n      });\n\n      return {columns: columns, events: eventsSorted};\n\n    };\n\n    this.getDayView = function(events, currentDay, dayStartHour, dayEndHour, dayHeight) {\n\n      var eventsInPeriod = getEventsInPeriod(currentDay, 'day', events);\n      var calendarStart = moment(currentDay).startOf('day').add(dayStartHour, 'hours');\n      var calendarEnd = moment(currentDay).startOf('day').add(dayEndHour, 'hours');\n      var calendarHeight = (dayEndHour - dayStartHour + 1) * dayHeight;\n      var dayHeightMultiplier = dayHeight / 60;\n      var buckets = [];\n\n      return eventsInPeriod.filter(function(event) {\n        return self.eventIsInPeriod(event.starts_at, event.ends_at, moment(currentDay).startOf('day').toDate(), moment(currentDay).endOf('day').toDate());\n      }).map(function(event) {\n        if (moment(event.starts_at).isBefore(calendarStart)) {\n          event.top = 0;\n        } else {\n          event.top = (moment(event.starts_at).startOf('minute').diff(calendarStart.startOf('minute'), 'minutes') * dayHeightMultiplier) - 2;\n        }\n\n        if (moment(event.ends_at).isAfter(calendarEnd)) {\n          event.height = calendarHeight - event.top;\n        } else {\n          var diffStart = event.starts_at;\n          if (moment(event.starts_at).isBefore(calendarStart)) {\n            diffStart = calendarStart.toDate();\n          }\n          event.height = moment(event.ends_at).diff(diffStart, 'minutes') * dayHeightMultiplier;\n        }\n\n        if (event.top - event.height > calendarHeight) {\n          event.height = 0;\n        }\n\n        event.left = 0;\n\n        return event;\n      }).filter(function(event) {\n        return event.height > 0;\n      }).map(function(event) {\n\n        var cannotFitInABucket = true;\n        buckets.forEach(function(bucket, bucketIndex) {\n          var canFitInThisBucket = true;\n\n          bucket.forEach(function(bucketItem) {\n            if (self.eventIsInPeriod(event.starts_at, event.ends_at, bucketItem.starts_at, bucketItem.ends_at) || self.eventIsInPeriod(bucketItem.starts_at, bucketItem.ends_at, event.starts_at, event.ends_at)) {\n              canFitInThisBucket = false;\n            }\n          });\n\n          if (canFitInThisBucket && cannotFitInABucket) {\n            cannotFitInABucket = false;\n            event.left = bucketIndex * 150;\n            buckets[bucketIndex].push(event);\n          }\n\n        });\n\n        if (cannotFitInABucket) {\n          event.left = buckets.length * 150;\n          buckets.push([event]);\n        }\n\n        return event;\n\n      });\n\n    };\n\n    this.toggleEventBreakdown = function(view, rowIndex, cellIndex) {\n\n      var openEvents = [];\n\n      function closeAllOpenItems() {\n        view = view.map(function(row) {\n          row.isOpened = false;\n          return row.map(function(cell) {\n            cell.isOpened = false;\n            return cell;\n          });\n        });\n      }\n\n      if (view[rowIndex][cellIndex].events.length > 0) {\n\n        var isCellOpened = view[rowIndex][cellIndex].isOpened;\n\n        closeAllOpenItems();\n\n        view[rowIndex][cellIndex].isOpened = !isCellOpened;\n        view[rowIndex].isOpened = !isCellOpened;\n        openEvents = view[rowIndex][cellIndex].events;\n      } else {\n        closeAllOpenItems();\n      }\n\n      return {view: view, openEvents: openEvents};\n\n    };\n\n  });\n","'use strict';\n\nangular.module('mwl.calendar')\n  .filter('truncateEventTitle', function() {\n\n    return function(string, length, boxHeight) {\n      if (!string) {\n        return '';\n      }\n\n      //Only truncate if if actually needs truncating\n      if (string.length >= length && string.length / 20 > boxHeight / 30) {\n        return string.substr(0, length) + '...';\n      } else {\n        return string;\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCollapseFallback', function($injector) {\n\n    if ($injector.has('collapseDirective')) {\n      return {};\n    }\n\n    return {\n      restrict: 'A',\n      controller: function($scope, $attrs, $element) {\n        var unbindWatcher = $scope.$watch($attrs.mwlCollapseFallback, function(shouldCollapse) {\n          if (shouldCollapse) {\n            $element.addClass('ng-hide');\n          } else {\n            $element.removeClass('ng-hide');\n          }\n        });\n\n        var unbindDestroy = $scope.$on('$destroy', function() {\n          unbindDestroy();\n          unbindWatcher();\n        });\n\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCalendarYear', function(moment) {\n\n    return {\n      templateUrl: 'templates/year.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        eventEditClick: '=calendarEditEventClick',\n        eventDeleteClick: '=calendarDeleteEventClick',\n        editEventHtml: '=calendarEditEventHtml',\n        deleteEventHtml: '=calendarDeleteEventHtml',\n        autoOpen: '=calendarAutoOpen',\n        timespanClick: '=calendarTimespanClick'\n      },\n      controller: function($scope, $sce, $timeout, calendarHelper) {\n        var firstRun = false;\n\n        $scope.$sce = $sce;\n\n        function updateView() {\n          $scope.view = calendarHelper.getYearView($scope.events, $scope.currentDay);\n\n          //Auto open the calendar to the current day if set\n          if ($scope.autoOpen && !firstRun) {\n            $scope.view.forEach(function(row, rowIndex) {\n              row.forEach(function(year, cellIndex) {\n                if (year.label === moment($scope.currentDay).format('MMMM')) {\n                  $scope.monthClicked(rowIndex, cellIndex, true);\n                  $timeout(function() {\n                    firstRun = false;\n                  });\n                }\n              });\n            });\n          }\n        }\n\n        $scope.$watch('currentDay', updateView);\n        $scope.$watch('events', updateView, true);\n\n        $scope.monthClicked = function(yearIndex, monthIndex, monthClickedFirstRun) {\n\n          if (!monthClickedFirstRun) {\n            $scope.timespanClick({calendarDate: $scope.view[yearIndex][monthIndex].date.startOf('month').toDate()});\n          }\n\n          var handler = calendarHelper.toggleEventBreakdown($scope.view, yearIndex, monthIndex);\n          $scope.view = handler.view;\n          $scope.openEvents = handler.openEvents;\n\n        };\n\n        $scope.drillDown = function(month) {\n          var date = moment($scope.currentDay).clone().month(month).toDate();\n          if ($scope.timespanClick({calendarDate: date}) !== false) {\n            $scope.calendarCtrl.changeView('month', date);\n          }\n        };\n      },\n      link: function(scope, element, attrs, calendarCtrl) {\n        scope.calendarCtrl = calendarCtrl;\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCalendarWeek', function() {\n\n    return {\n      templateUrl: 'templates/week.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        useIsoWeek: '=calendarUseIsoWeek',\n        timespanClick: '=calendarTimespanClick'\n      },\n      controller: function($scope, moment, calendarHelper) {\n        function updateView() {\n          $scope.view = calendarHelper.getWeekView($scope.events, $scope.currentDay, $scope.useIsoWeek);\n        }\n\n        $scope.drillDown = function(day) {\n          var date = moment($scope.currentDay).clone().date(day).toDate();\n          if ($scope.timespanClick({calendarDate: date}) !== false) {\n            $scope.calendarCtrl.changeView('day', date);\n          }\n        };\n\n        $scope.$watch('currentDay', updateView);\n        $scope.$watch('events', updateView, true);\n      },\n      link: function(scope, element, attrs, calendarCtrl) {\n        scope.calendarCtrl = calendarCtrl;\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCalendarSlideBox', function() {\n\n    return {\n      restrict: 'EA',\n      templateUrl: 'templates/calendarSlideBox.html',\n      replace: true,\n      controller: function($scope, $attrs) {\n        var unbindWatcher = $scope.$watch($attrs.isOpen, function(shouldCollapse) {\n          $scope.shouldCollapse = shouldCollapse;\n        });\n\n        var unbindDestroy = $scope.$on('$destroy', function() {\n          unbindDestroy();\n          unbindWatcher();\n        });\n\n      },\n      require: ['^?mwlCalendarMonth', '^?mwlCalendarYear'],\n      link: function(scope, elm, attrs, ctrls) {\n        scope.isMonthView = !!ctrls[0];\n        scope.isYearView = !!ctrls[1];\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCalendarMonth', function() {\n\n    return {\n      templateUrl: 'templates/month.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        eventEditClick: '=calendarEditEventClick',\n        eventDeleteClick: '=calendarDeleteEventClick',\n        editEventHtml: '=calendarEditEventHtml',\n        deleteEventHtml: '=calendarDeleteEventHtml',\n        autoOpen: '=calendarAutoOpen',\n        useIsoWeek: '=calendarUseIsoWeek',\n        timespanClick: '=calendarTimespanClick'\n      },\n      controller: function($scope, $sce, $timeout, moment, calendarHelper) {\n        var firstRun = false;\n\n        $scope.$sce = $sce;\n\n        function updateView() {\n          $scope.view = calendarHelper.getMonthView($scope.events, $scope.currentDay, $scope.useIsoWeek);\n\n          //Auto open the calendar to the current day if set\n          if ($scope.autoOpen && !firstRun) {\n            $scope.view.forEach(function(week, rowIndex) {\n              week.forEach(function(day, cellIndex) {\n                if (day.inMonth && moment($scope.currentDay).startOf('day').isSame(day.date.startOf('day'))) {\n                  $scope.dayClicked(rowIndex, cellIndex, true);\n                  $timeout(function() {\n                    firstRun = false;\n                  });\n                }\n              });\n            });\n          }\n\n        }\n\n        $scope.$watch('currentDay', updateView);\n        $scope.$watch('events', updateView, true);\n\n        $scope.weekDays = calendarHelper.getWeekDayNames(false, $scope.useIsoWeek);\n\n        $scope.dayClicked = function(rowIndex, cellIndex, dayClickedFirstRun) {\n\n          if (!dayClickedFirstRun) {\n            $scope.timespanClick({calendarDate: $scope.view[rowIndex][cellIndex].date.startOf('day').toDate()});\n          }\n\n          var handler = calendarHelper.toggleEventBreakdown($scope.view, rowIndex, cellIndex);\n          $scope.view = handler.view;\n          $scope.openEvents = handler.openEvents;\n\n        };\n\n        $scope.drillDown = function(day) {\n          var date = moment($scope.currentDay).clone().date(day).toDate();\n          if ($scope.timespanClick({calendarDate: date}) !== false) {\n            $scope.calendarCtrl.changeView('day', date);\n          }\n        };\n\n        $scope.highlightEvent = function(event, shouldAddClass) {\n\n          $scope.view.forEach(function(week) {\n\n            week.forEach(function(day) {\n\n              delete day.highlightClass;\n\n              if (shouldAddClass) {\n                var dayContainsEvent = day.events.filter(function(e) {\n                  return e.$id === event.$id;\n                }).length > 0;\n\n                if (dayContainsEvent) {\n                  day.highlightClass = 'day-highlight dh-event-' + event.type;\n                }\n              }\n\n            });\n\n          });\n\n        };\n      },\n      link: function(scope, element, attrs, calendarCtrl) {\n        scope.calendarCtrl = calendarCtrl;\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCalendarDay', function() {\n\n    return {\n      templateUrl: 'templates/day.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        eventLabel: '@calendarEventLabel',\n        timeLabel: '@calendarTimeLabel',\n        dayViewStart: '@calendarDayViewStart',\n        dayViewEnd: '@calendarDayViewEnd',\n        dayViewSplit: '@calendarDayViewSplit'\n      },\n      controller: function($scope, moment, calendarHelper) {\n        var dayViewStart = moment($scope.dayViewStart || '00:00', 'HH:mm');\n        var dayViewEnd = moment($scope.dayViewEnd || '23:00', 'HH:mm');\n\n        $scope.dayViewSplit = parseInt($scope.dayViewSplit);\n        $scope.dayHeight = (60 / $scope.dayViewSplit) * 30;\n\n        $scope.days = [];\n        var dayCounter = moment(dayViewStart);\n        for (var i = 0; i <= dayViewEnd.diff(dayViewStart, 'hours'); i++) {\n          $scope.days.push({\n            label: dayCounter.format('ha')\n          });\n          dayCounter.add(1, 'hour');\n        }\n\n        function updateView() {\n          $scope.view = calendarHelper.getDayView($scope.events, $scope.currentDay, dayViewStart.hours(), dayViewEnd.hours(), $scope.dayHeight);\n        }\n\n        $scope.$watch('currentDay', updateView);\n        $scope.$watch('events', updateView, true);\n\n      }\n    };\n\n  });\n","'use strict';\n\nangular\n  .module('mwl.calendar')\n  .directive('mwlCalendar', function() {\n\n    return {\n      templateUrl: 'templates/main.html',\n      restrict: 'EA',\n      scope: {\n        events: '=calendarEvents',\n        view: '=calendarView',\n        currentDay: '=calendarCurrentDay',\n        control: '=calendarControl',\n        eventClick: '&calendarEventClick',\n        eventEditClick: '&calendarEditEventClick',\n        eventDeleteClick: '&calendarDeleteEventClick',\n        editEventHtml: '=calendarEditEventHtml',\n        deleteEventHtml: '=calendarDeleteEventHtml',\n        autoOpen: '=calendarAutoOpen',\n        useIsoWeek: '=calendarUseIsoWeek',\n        eventLabel: '@calendarEventLabel',\n        timeLabel: '@calendarTimeLabel',\n        dayViewStart: '@calendarDayViewStart',\n        dayViewEnd: '@calendarDayViewEnd',\n        weekTitleLabel: '@calendarWeekTitleLabel',\n        timespanClick: '&calendarTimespanClick',\n        dayViewSplit: '@calendarDayViewSplit'\n      },\n      controller: function($scope, $timeout, $locale, $filter, moment) {\n\n        var self = this;\n\n        var weekTitleLabel = $scope.weekTitleLabel || 'Week {week} of {year}';\n        this.titleFunctions = {\n          day: function(currentDay) {\n            return $filter('date')(currentDay, 'EEEE d MMMM, yyyy');\n          },\n          week: function(currentDay) {\n            return weekTitleLabel.replace('{week}', moment(currentDay).week()).replace('{year}', moment(currentDay).format('YYYY'));\n          },\n          month: function(currentDay) {\n            return $filter('date')(currentDay, 'MMMM yyyy');\n          },\n          year: function(currentDay) {\n            return moment(currentDay).format('YYYY');\n          }\n        };\n\n        this.changeView = function(view, newDay) {\n          $scope.view = view;\n          $scope.currentDay = newDay;\n        };\n\n        $scope.control = $scope.control || {};\n\n        $scope.control.prev = function() {\n          $scope.currentDay = moment($scope.currentDay).subtract(1, $scope.view).toDate();\n        };\n\n        $scope.control.next = function() {\n          $scope.currentDay = moment($scope.currentDay).add(1, $scope.view).toDate();\n        };\n\n        $scope.control.getTitle = function() {\n          if (!self.titleFunctions[$scope.view]) {\n            return '';\n          }\n          return self.titleFunctions[$scope.view]($scope.currentDay);\n        };\n\n        //Auto update the calendar when the locale changes\n        var firstRunWatcher = true;\n        var unbindWatcher = $scope.$watch(function() {\n          return moment.locale() + $locale.id;\n        }, function() {\n          if (firstRunWatcher) { //dont run the first time the calendar is initialised\n            firstRunWatcher = false;\n            return;\n          }\n          var originalView = angular.copy($scope.view);\n          $scope.view = 'redraw';\n          $timeout(function() { //bit of a hacky way to redraw the calendar, should be refactored at some point\n            $scope.view = originalView;\n          });\n        });\n\n        //Remove the watcher when the calendar is destroyed\n        var unbindDestroyListener = $scope.$on('$destroy', function() {\n          unbindDestroyListener();\n          unbindWatcher();\n        });\n\n      }\n    };\n\n  });\n"],"sourceRoot":"/source/"}